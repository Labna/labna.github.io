<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Chapitre 10.html</title>
  <meta name="generator" content="Haroopad 0.12.2" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>div.oembedall-githubrepos{border:1px solid #DDD;border-radius:4px;list-style-type:none;margin:0 0 10px;padding:8px 10px 0;font:13.34px/1.4 helvetica,arial,freesans,clean,sans-serif;width:452px;background-color:#fff}div.oembedall-githubrepos .oembedall-body{background:-moz-linear-gradient(center top,#FAFAFA,#EFEFEF) repeat scroll 0 0 transparent;background:-webkit-gradient(linear,left top,left bottom,from(#FAFAFA),to(#EFEFEF));border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-top:1px solid #EEE;margin-left:-10px;margin-top:8px;padding:5px 10px;width:100%}div.oembedall-githubrepos h3{font-size:14px;margin:0;padding-left:18px;white-space:nowrap}div.oembedall-githubrepos p.oembedall-description{color:#444;font-size:12px;margin:0 0 3px}div.oembedall-githubrepos p.oembedall-updated-at{color:#888;font-size:11px;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats{border:medium none;float:right;font-size:11px;font-weight:700;padding-left:15px;position:relative;z-index:5;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats li{border:medium none;color:#666;display:inline-block;list-style-type:none;margin:0!important}div.oembedall-githubrepos ul.oembedall-repo-stats li a{background-color:transparent;border:medium none;color:#666!important;background-position:5px -2px;background-repeat:no-repeat;border-left:1px solid #DDD;display:inline-block;height:21px;line-height:21px;padding:0 5px 0 23px}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a{border-left:medium none;margin-right:-3px}div.oembedall-githubrepos ul.oembedall-repo-stats li a:hover{background:none no-repeat scroll 5px -27px #4183C4;color:#FFF!important;text-decoration:none}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a:hover{border-bottom-left-radius:3px;border-top-left-radius:3px}ul.oembedall-repo-stats li:last-child a:hover{border-bottom-right-radius:3px;border-top-right-radius:3px}span.oembedall-closehide{background-color:#aaa;border-radius:2px;cursor:pointer;margin-right:3px}div.oembedall-container{margin-top:5px;text-align:left}.oembedall-ljuser{font-weight:700}.oembedall-ljuser img{vertical-align:bottom;border:0;padding-right:1px}.oembedall-stoqembed{border-bottom:1px dotted #999;float:left;overflow:hidden;width:730px;line-height:1;background:none repeat scroll 0 0 #FFF;color:#000;font-family:Arial,Liberation Sans,DejaVu Sans,sans-serif;font-size:80%;text-align:left;margin:0;padding:0}.oembedall-stoqembed a{color:#07C;text-decoration:none;margin:0;padding:0}.oembedall-stoqembed a:hover{text-decoration:underline}.oembedall-stoqembed a:visited{color:#4A6B82}.oembedall-stoqembed h3{font-family:Trebuchet MS,Liberation Sans,DejaVu Sans,sans-serif;font-size:130%;font-weight:700;margin:0;padding:0}.oembedall-stoqembed .oembedall-reputation-score{color:#444;font-size:120%;font-weight:700;margin-right:2px}.oembedall-stoqembed .oembedall-user-info{height:35px;width:185px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-gravatar32{float:left;height:32px;width:32px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-details{float:left;margin-left:5px;overflow:hidden;white-space:nowrap;width:145px}.oembedall-stoqembed .oembedall-question-hyperlink{font-weight:700}.oembedall-stoqembed .oembedall-stats{background:none repeat scroll 0 0 #EEE;margin:0 0 0 7px;padding:4px 7px 6px;width:58px}.oembedall-stoqembed .oembedall-statscontainer{float:left;margin-right:8px;width:86px}.oembedall-stoqembed .oembedall-votes{color:#555;padding:0 0 7px;text-align:center}.oembedall-stoqembed .oembedall-vote-count-post{font-size:240%;color:#808185;display:block;font-weight:700}.oembedall-stoqembed .oembedall-views{color:#999;padding-top:4px;text-align:center}.oembedall-stoqembed .oembedall-status{margin-top:-3px;padding:4px 0;text-align:center;background:none repeat scroll 0 0 #75845C;color:#FFF}.oembedall-stoqembed .oembedall-status strong{color:#FFF;display:block;font-size:140%}.oembedall-stoqembed .oembedall-summary{float:left;width:635px}.oembedall-stoqembed .oembedall-excerpt{line-height:1.2;margin:0;padding:0 0 5px}.oembedall-stoqembed .oembedall-tags{float:left;line-height:18px}.oembedall-stoqembed .oembedall-tags a:hover{text-decoration:none}.oembedall-stoqembed .oembedall-post-tag{background-color:#E0EAF1;border-bottom:1px solid #3E6D8E;border-right:1px solid #7F9FB6;color:#3E6D8E;font-size:90%;line-height:2.4;margin:2px 2px 2px 0;padding:3px 4px;text-decoration:none;white-space:nowrap}.oembedall-stoqembed .oembedall-post-tag:hover{background-color:#3E6D8E;border-bottom:1px solid #37607D;border-right:1px solid #37607D;color:#E0EAF1}.oembedall-stoqembed .oembedall-fr{float:right}.oembedall-stoqembed .oembedall-statsarrow{background-image:url(http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=3);background-repeat:no-repeat;overflow:hidden;background-position:0 -435px;float:right;height:13px;margin-top:12px;width:7px}.oembedall-facebook1{border:#1A3C6C solid 1px;padding:0;font:13.34px/1.4 verdana;width:500px}.oembedall-facebook2{background-color:#627add}.oembedall-facebook2 a{color:#e8e8e8;text-decoration:none}.oembedall-facebookBody{background-color:#fff;vertical-align:top;padding:5px}.oembedall-facebookBody .contents{display:inline-block;width:100%}.oembedall-facebookBody div img{float:left;margin-right:5px}div.oembedall-lanyard{-webkit-box-shadow:none;-webkit-transition-delay:0s;-webkit-transition-duration:.4000000059604645s;-webkit-transition-property:width;-webkit-transition-timing-function:cubic-bezier(0.42,0,.58,1);background-attachment:scroll;background-clip:border-box;background-color:transparent;background-image:none;background-origin:padding-box;border-bottom-width:0;border-left-width:0;border-right-width:0;border-top-width:0;box-shadow:none;color:#112644;display:block;float:left;font-family:'Trebuchet MS',Trebuchet,sans-serif;font-size:16px;height:253px;line-height:19px;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;max-width:none;min-height:0;outline-color:#112644;outline-style:none;outline-width:0;overflow-x:visible;overflow-y:visible;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;position:relative;text-align:left;vertical-align:baseline;width:804px}div.oembedall-lanyard .tagline{font-size:1.5em}div.oembedall-lanyard .wrapper{overflow:hidden;clear:both}div.oembedall-lanyard .split{float:left;display:inline}div.oembedall-lanyard .prominent-place .flag:active,div.oembedall-lanyard .prominent-place .flag:focus,div.oembedall-lanyard .prominent-place .flag:hover,div.oembedall-lanyard .prominent-place .flag:link,div.oembedall-lanyard .prominent-place .flag:visited{float:left;display:block;width:48px;height:48px;position:relative;top:-5px;margin-right:10px}div.oembedall-lanyard .place-context{font-size:.889em}div.oembedall-lanyard .prominent-place .sub-place{display:block}div.oembedall-lanyard .prominent-place{font-size:1.125em;line-height:1.1em;font-weight:400}div.oembedall-lanyard .main-date{color:#8CB4E0;font-weight:700;line-height:1.1}div.oembedall-lanyard .first{width:48.57%;margin:0 0 0 2.857%}html{height:100%}body{margin:0!important;padding:5px 20px 26px!important;background-color:#fff;font-family:"Lucida Grande","Segoe UI","Apple SD Gothic Neo","Malgun Gothic","Lucida Sans Unicode",Helvetica,Arial,sans-serif;font-size:.9em;overflow-x:hidden;overflow-y:auto}br,h1,h2,h3,h4,h5,h6{clear:both}hr.page{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;border:0 none;color:#ccc;height:3px;padding:0}hr.underscore{border:0 none!important;height:30px;padding:0;-webkit-margin-before:0;-webkit-margin-after:0}body >:first-child{margin-top:0!important}img.plugin{box-shadow:0 1px 3px rgba(0,0,0,.1);border-radius:3px}iframe{border:0}figure{-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0}kbd{border:1px solid #aaa;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-moz-box-shadow:1px 2px 2px #ddd;-webkit-box-shadow:1px 2px 2px #ddd;box-shadow:1px 2px 2px #ddd;background-color:#f9f9f9;background-image:-moz-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-o-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-webkit-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:linear-gradient(top,#eee,#f9f9f9,#eee);padding:1px 3px;font-family:inherit;font-size:.85em}.oembeded .oembed_photo{display:inline-block}img[data-echo]{margin:25px 0;width:100px;height:100px;background:#fff url(../img/ajax.gif) no-repeat center center}.spinner{display:inline-block;width:10px;height:10px;margin-bottom:-.1em;border:2px solid rgba(0,0,0,.5);border-top-color:transparent;border-radius:100%;-webkit-animation:spin 1s infinite linear;animation:spin 1s infinite linear}.spinner:after{content:'';display:block;width:0;height:0;position:absolute;top:-6px;left:0;border:4px solid transparent;border-bottom-color:rgba(0,0,0,.5);-webkit-transform:rotate(45deg);transform:rotate(45deg)}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}p.toc{margin:0!important}p.toc ul{padding-left:10px}p.toc>ul{padding:10px;margin:0 10px;display:inline-block;border:1px solid #ededed;border-radius:5px}p.toc li,p.toc ul{list-style-type:none}p.toc li{width:100%;padding:0;overflow:hidden}p.toc li a::after{content:"."}p.toc li a:before{content:"• "}p.toc h5{text-transform:uppercase}p.toc .title{float:left;padding-right:3px}p.toc .number{margin:0;float:right;padding-left:3px;background:#fff;display:none}.markdown{padding:20px}.markdown a{text-decoration:none;vertical-align:baseline}.markdown a:hover{text-decoration:underline}.markdown h1{font-size:2.2em;font-weight:700;margin:1.5em 0 1em}.markdown h2{font-size:1.8em;font-weight:700;margin:1.275em 0 .85em}.markdown h3{font-size:1.6em;font-weight:700;margin:1.125em 0 .75em}.markdown h4{font-size:1.4em;font-weight:700;margin:.99em 0 .66em}.markdown h5{font-size:1.2em;font-weight:700;margin:.855em 0 .57em}.markdown h6{font-size:1em;font-weight:700;margin:.75em 0 .5em}.markdown h1+p,.markdown h1:first-child,.markdown h2+p,.markdown h2:first-child,.markdown h3+p,.markdown h3:first-child,.markdown h4+p,.markdown h4:first-child,.markdown h5+p,.markdown h5:first-child,.markdown h6+p,.markdown h6:first-child{margin-top:0}.markdown hr{border:1px solid #ccc}.markdown p{margin:1em 0;word-wrap:break-word}.markdown ol{list-style-type:decimal}.markdown li{display:list-item;line-height:1.4em}.markdown blockquote{margin:1em 20px}.markdown blockquote>:first-child{margin-top:0}.markdown blockquote>:last-child{margin-bottom:0}.markdown blockquote cite:before{content:'\2014 \00A0'}.markdown .code{border-radius:3px;word-break:break-all;word-wrap:break-word}.markdown pre{border-radius:3px;word-break:break-all;word-wrap:break-word;overflow:auto}.markdown pre code{display:block}.markdown pre>code{border:1px solid #ccc;white-space:pre;padding:.5em;margin:0}.markdown code{border-radius:3px;word-break:break-all;word-wrap:break-word;border:1px solid #ccc;padding:0 5px;margin:0 2px}.markdown img{max-width:100%}.markdown table{padding:0;border-collapse:collapse;border-spacing:0}.markdown table tr td,.markdown table tr th{border:1px solid #ccc;margin:0;padding:6px 13px}.markdown table tr th{font-weight:700}.markdown table tr th>:first-child{margin-top:0}.markdown table tr th>:last-child{margin-bottom:0}.markdown table tr td>:first-child{margin-top:0}.markdown table tr td>:last-child{margin-bottom:0}.markdown em.underline{font-style:normal;text-decoration:underline}.markdown strong.highlight{color:#000;padding:0 5px;background-color:#fdffb6;-webkit-box-shadow:#fdffb6 0 0 5px;-moz-box-shadow:#fdffb6 0 0 5px;box-shadow:#fdffb6 0 0 5px}.clearness{padding:20px;color:#737373;font-size:15px;font-family:"Lucida Grande","Lucida Sans Unicode","Lucida Sans",AppleSDGothicNeo-Medium,'Segoe UI','Malgun Gothic',Verdana,Tahoma,sans-serif;background:#fff;-webkit-font-smoothing:antialiased}.clearness a{color:#1e6ea7}.clearness a:hover{color:#268bd2}.clearness h1,.clearness h2,.clearness h3,.clearness h4,.clearness h5{color:#404040}.clearness h2{border-bottom:1px solid #ccc;line-height:1.7em}.clearness h6{color:#666}.clearness hr{border:1px solid #e6e6e6}.clearness pre>code{font-size:.9em;font-family:Consolas,Inconsolata,Courier,monospace}.clearness blockquote{padding:0 15px;font-style:italic}.clearness blockquote:before{content:"\201C";font-size:40px;margin-left:-20px;color:#aaa}.clearness table{background-color:#fff;border-collapse:separate;border-spacing:2px}.clearness table tr td,.clearness table tr th{border:0;padding:.2em 1em}.clearness table tr th{border-bottom:1px solid #bfbfbf}.clearness table tr td{border-bottom:1px solid #d9d9d9}.clearness table tr:nth-child(2n){background-color:#fff}.hljs{display:block;overflow-x:auto;padding:.5em;background:#f0f0f0;-webkit-text-size-adjust:none}.clojure .hljs-built_in,.hljs,.hljs-subst,.hljs-tag .hljs-title,.lisp .hljs-title,.nginx .hljs-title{color:#000}.apache .hljs-cbracket,.apache .hljs-tag,.asciidoc .hljs-header,.bash .hljs-variable,.coffeescript .hljs-attribute,.django .hljs-variable,.erlang_repl .hljs-function_or_atom,.haml .hljs-symbol,.hljs-addition,.hljs-constant,.hljs-flow,.hljs-parent,.hljs-pragma,.hljs-preprocessor,.hljs-rules .hljs-value,.hljs-stream,.hljs-string,.hljs-tag .hljs-value,.hljs-template_tag,.hljs-title,.markdown .hljs-header,.ruby .hljs-symbol,.ruby .hljs-symbol .hljs-string,.smalltalk .hljs-class,.tex .hljs-command,.tex .hljs-special{color:#800}.asciidoc .hljs-blockquote,.diff .hljs-header,.hljs-annotation,.hljs-chunk,.hljs-comment,.hljs-template_comment,.markdown .hljs-blockquote,.smartquote{color:#888}.asciidoc .hljs-bullet,.asciidoc .hljs-link_url,.go .hljs-constant,.hljs-change,.hljs-date,.hljs-hexcolor,.hljs-literal,.hljs-number,.hljs-regexp,.lasso .hljs-variable,.makefile .hljs-variable,.markdown .hljs-bullet,.markdown .hljs-link_url,.smalltalk .hljs-char,.smalltalk .hljs-symbol{color:#080}.apache .hljs-sqbracket,.asciidoc .hljs-attribute,.asciidoc .hljs-link_label,.clojure .hljs-attribute,.coffeescript .hljs-property,.erlang_repl .hljs-reserved,.haml .hljs-bullet,.hljs-array,.hljs-attr_selector,.hljs-decorator,.hljs-deletion,.hljs-doctype,.hljs-envvar,.hljs-filter .hljs-argument,.hljs-important,.hljs-javadoc,.hljs-label,.hljs-localvars,.hljs-phony,.hljs-pi,.hljs-prompt,.hljs-pseudo,.hljs-shebang,.lasso .hljs-attribute,.markdown .hljs-link_label,.nginx .hljs-built_in,.ruby .hljs-string,.tex .hljs-formula,.vhdl .hljs-attribute{color:#88f}.apache .hljs-tag,.asciidoc .hljs-strong,.bash .hljs-variable,.css .hljs-tag,.hljs-built_in,.hljs-id,.hljs-javadoctag,.hljs-keyword,.hljs-phpdoc,.hljs-request,.hljs-status,.hljs-title,.hljs-type,.hljs-typename,.hljs-winutils,.hljs-yardoctag,.markdown .hljs-strong,.smalltalk .hljs-class,.tex .hljs-command{font-weight:700}.asciidoc .hljs-emphasis,.markdown .hljs-emphasis{font-style:italic}.nginx .hljs-built_in{font-weight:400}.coffeescript .javascript,.javascript .xml,.lasso .markup,.tex .hljs-formula,.xml .css,.xml .hljs-cdata,.xml .javascript,.xml .vbscript{opacity:.5}footer{position:fixed;font-size:.8em;text-align:right;bottom:0;margin-left:-25px;height:20px;width:100%}</style>
</head>
<body class="markdown clearness">

  <div style="display:flex;justify-content:space-between"><div><a href="chapitre9.html">← precedent</a></div><div><a href="chapitre11.html">suivant →</a></div></div><h1 id="servlet---gestion-des-exceptions"><a name="servlet---gestion-des-exceptions" href="#servlet---gestion-des-exceptions"></a>Servlet - Gestion des exceptions</h1><p class="toc" style="undefined"></p><ul>
<li><ul>
<li><span class="title">
<a href="#configuration-de-web.xml" title="Configuration de web.xml">Configuration de web.xml</a>
</span>
<!--span class="number">
0
</span-->
</li>
<li><span class="title">
<a href="#attributs-de-demande---erreurs/exceptions" title="Attributs de demande - Erreurs/Exceptions">Attributs de demande - Erreurs/Exceptions</a>
</span>
<!--span class="number">
1
</span-->
</li>
<li><span class="title">
<a href="#exemple-de-servlet-de-gestionnaire-d'erreurs" title="Exemple de servlet de gestionnaire d’erreurs">Exemple de servlet de gestionnaire d’erreurs</a>
</span>
<!--span class="number">
2
</span-->
</li>
</ul>
</li>

</ul>
<p></p><p>Lorsqu’un servlet lève une exception, le conteneur Web recherche dans les configurations du fichier web.xml qui utilisent l’élément type-exception une correspondance avec le type d’exception levée.</p><p>Vous devrez utiliser l’élément <strong>error-page</strong> dans web.xml pour spécifier l’appel des servlets en réponse à certaines <strong>exceptions</strong> ou <strong>codes de statut</strong> HTTP.</p><h2 id="configuration-de-web.xml"><a name="configuration-de-web.xml" href="#configuration-de-web.xml"></a>Configuration de web.xml</h2><p>Considérez que vous avez un servlet ErrorHandler qui serait appelé chaque fois qu’il y a une exception ou une erreur définie. Ce qui suit serait l’entrée créée dans web.xml.</p><pre><code class="xml hljs" data-origin="&lt;pre&gt;&lt;code class=&quot;XML&quot;&gt;&amp;lt;!-- définition de servlet --&amp;gt;
&amp;lt;servlet&amp;gt;
   &amp;lt;servlet-name&amp;gt;ErrorHandler&amp;lt;/servlet-name&amp;gt;
   &amp;lt;servlet-class&amp;gt;ErrorHandler&amp;lt;/servlet-class&amp;gt;
&amp;lt;/servlet&amp;gt;

&amp;lt;!-- mappages de servlets --&amp;gt;
&amp;lt;servlet-mapping&amp;gt;
   &amp;lt;servlet-name&amp;gt;ErrorHandler&amp;lt;/servlet-name&amp;gt;
   &amp;lt;url-pattern&amp;gt;/ErrorHandler&amp;lt;/url-pattern&amp;gt;
&amp;lt;/servlet-mapping&amp;gt;

&amp;lt;!-- Pages d'erreur relatives au code d'erreur --&amp;gt;
&amp;lt;error-page&amp;gt;
   &amp;lt;error-code&amp;gt;404&amp;lt;/error-code&amp;gt;
   &amp;lt;location&amp;gt;/ErrorHandler&amp;lt;/location&amp;gt;
&amp;lt;/error-page&amp;gt;

&amp;lt;error-page&amp;gt;
   &amp;lt;error-code&amp;gt;403&amp;lt;/error-code&amp;gt;
   &amp;lt;location&amp;gt;/ErrorHandler&amp;lt;/location&amp;gt;
&amp;lt;/error-page&amp;gt;

&amp;lt;!-- Pages d'erreur liées au type d'exception --&amp;gt;
&amp;lt;error-page&amp;gt;
   &amp;lt;exception-type&amp;gt;
      javax.servlet.ServletException
   &amp;lt;/exception-type &amp;gt;
   &amp;lt;location&amp;gt;/ErrorHandler&amp;lt;/location&amp;gt;
&amp;lt;/error-page&amp;gt;

&amp;lt;error-page&amp;gt;
   &amp;lt;exception-type&amp;gt;java.io.IOException&amp;lt;/exception-type &amp;gt;
   &amp;lt;location&amp;gt;/ErrorHandler&amp;lt;/location&amp;gt;
&amp;lt;/error-page&amp;gt;
&lt;/code&gt;&lt;/pre&gt;"><span class="hljs-comment">&lt;!-- définition de servlet --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">servlet</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">servlet-name</span>&gt;</span>ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">servlet-class</span>&gt;</span>ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">servlet</span>&gt;</span>

<span class="hljs-comment">&lt;!-- mappages de servlets --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">servlet-mapping</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">servlet-name</span>&gt;</span>ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-mapping</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Pages d'erreur relatives au code d'erreur --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">error-page</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">error-code</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-title">error-code</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">location</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">error-page</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">error-page</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">error-code</span>&gt;</span>403<span class="hljs-tag">&lt;/<span class="hljs-title">error-code</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">location</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">error-page</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Pages d'erreur liées au type d'exception --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">error-page</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">exception-type</span>&gt;</span>
      javax.servlet.ServletException
   <span class="hljs-tag">&lt;/<span class="hljs-title">exception-type</span> &gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">location</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">error-page</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">error-page</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">exception-type</span>&gt;</span>java.io.IOException<span class="hljs-tag">&lt;/<span class="hljs-title">exception-type</span> &gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">location</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">error-page</span>&gt;</span>
</code></pre><p>Si vous souhaitez avoir un gestionnaire d’erreur générique pour toutes les exceptions, vous devez définir l’option page d’erreur suivante au lieu de définir des éléments de page d’erreur distincts pour chaque exception:</p><pre><code class="xml hljs" data-origin="&lt;pre&gt;&lt;code class=&quot;XML&quot;&gt;&amp;lt;error-page&amp;gt;
   &amp;lt;exception-type&amp;gt;java.lang.Throwable&amp;lt;/exception-type &amp;gt;
   &amp;lt;location&amp;gt;/ErrorHandler&amp;lt;/location&amp;gt;
&amp;lt;/error-page&amp;gt;
&lt;/code&gt;&lt;/pre&gt;"><span class="hljs-tag">&lt;<span class="hljs-title">error-page</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">exception-type</span>&gt;</span>java.lang.Throwable<span class="hljs-tag">&lt;/<span class="hljs-title">exception-type</span> &gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">location</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">error-page</span>&gt;</span>
</code></pre><p>Voici les points à noter à propos de ci-dessus web.xml pour le traitement des exceptions:</p><ul>
<li><p>Le servlet ErrorHandler est défini comme tout autre servlet et configuré dans le fichier web.xml.</p>
</li>
<li><p>S’il y a une erreur avec le code d’état 404 (Introuvable) ou 403 (Interdit), le servlet ErrorHandler sera appelé.</p>
</li>
<li><p>Si l’application Web lève une exception ServletException ou IOException, le conteneur Web appelle le servlet /ErrorHandler.</p>
</li>
<li><p>Vous pouvez définir différents gestionnaires d’erreur pour gérer différents types d’erreurs ou d’exceptions. L’exemple ci-dessus est très générique et nous espérons qu’il vous servira à vous expliquer le concept de base.</p>
</li>
</ul><h2 id="attributs-de-demande---erreurs/exceptions"><a name="attributs-de-demande---erreurs/exceptions" href="#attributs-de-demande---erreurs/exceptions"></a>Attributs de demande - Erreurs/Exceptions</h2><p>Vous trouverez ci-dessous la liste des attributs de requête auxquels un servlet de traitement des erreurs peut accéder pour analyser la nature de l’erreur / exception.</p><table>
<thead>
<tr>
<th>Sr.No.</th>
<th>Attribut et description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><strong>javax.servlet.error.status_code</strong><br><br>Cet attribut donne un code d’état qui peut être stocké et analysé après avoir été stocké dans un type de données java.lang.Integer.</td>
</tr>
<tr>
<td>2</td>
<td><strong>javax.servlet.error.exception_type</strong><br><br>Cet attribut donne des informations sur le type d’exception pouvant être stocké et analysé après le stockage dans un type de données java.lang.Class.</td>
</tr>
<tr>
<td>3</td>
<td><strong>javax.servlet.error.message</strong><br><br>Cet attribut donne aux informations un message d’erreur exact qui peut être stocké et analysé après le stockage dans un type de données java.lang.String.</td>
</tr>
<tr>
<td>4</td>
<td><strong>javax.servlet.error.request_uri</strong><br><br>Cet attribut donne des informations sur l’URL appelant le servlet. Il peut être stocké et analysé après le stockage dans un type de données java.lang.String.</td>
</tr>
<tr>
<td>5</td>
<td><strong>javax.servlet.error.exception</strong><br><br>Cet attribut donne des informations sur l’exception déclenchée, qui peuvent être stockées et analysées.</td>
</tr>
<tr>
<td>6</td>
<td><strong>javax.servlet.error.servlet_name</strong><br><br>Cet attribut donne le nom du servlet qui peut être stocké et analysé après le stockage dans un type de données java.lang.String.</td>
</tr>
</tbody>
</table><h2 id="exemple-de-servlet-de-gestionnaire-d'erreurs"><a name="exemple-de-servlet-de-gestionnaire-d'erreurs" href="#exemple-de-servlet-de-gestionnaire-d'erreurs"></a>Exemple de servlet de gestionnaire d’erreurs</h2><p>Cet exemple vous donnerait une compréhension de base de la gestion des exceptions dans Servlet, mais vous pouvez écrire des applications de filtrage plus sophistiquées en utilisant le même concept:</p><pre><code class="java hljs" data-origin="&lt;pre&gt;&lt;code class=&quot;JAVA&quot;&gt;// Importer les bibliothèques Java requises
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.util.*;

// Extension de la classe HttpServlet
public class ErrorHandler extends HttpServlet {

   // Méthode pour gérer la requête de méthode GET.
   public void doGet(HttpServletRequest request, HttpServletResponse response)
      throws ServletException, IOException {

      // Analyse l'exception de servlet
      Throwable throwable = (Throwable)
      request.getAttribute(&quot;javax.servlet.error.exception&quot;);
      Integer statusCode = (Integer)
      request.getAttribute(&quot;javax.servlet.error.status_code&quot;);
      String servletName = (String)
      request.getAttribute(&quot;javax.servlet.error.servlet_name&quot;);

      if (servletName == null) {
         servletName = &quot;Unknown&quot;;
      }
      String requestUri = (String)
      request.getAttribute(&quot;javax.servlet.error.request_uri&quot;);

      if (requestUri == null) {
         requestUri = &quot;Unknown&quot;;
      }

      // Définir le type de contenu de la réponse
      response.setContentType(&quot;text/html&quot;);

      PrintWriter out = response.getWriter();
      String title = &quot;Error/Exception Information&quot;;
      String docType =
         &quot;&amp;lt;!doctype html public \&quot;-//w3c//dtd html 4.0 &quot; +
         &quot;transitional//en\&quot;&amp;gt;\n&quot;;

      out.println(docType +
         &quot;&amp;lt;html&amp;gt;\n&quot; +
         &quot;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;&quot; + title + &quot;&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;\n&quot; +
         &quot;&amp;lt;body bgcolor = \&quot;#f0f0f0\&quot;&amp;gt;\n&quot;);

      if (throwable == null &amp;amp;&amp;amp; statusCode == null) {
         out.println(&quot;&amp;lt;h2&amp;gt;Les informations d'erreur sont manquantes&amp;lt;/h2&amp;gt;&quot;);
         out.println(&quot;S'il vous plaît revenir à la &amp;lt;a href=\&quot;&quot; +
            response.encodeURL(&quot;http://localhost:8080/&quot;) +
            &quot;\&quot;&amp;gt;Page d'accueil&amp;lt;/a&amp;gt;.&quot;);
      } else if (statusCode != null) {
         out.println(&quot;Le code d'état: &quot; + statusCode);
      } else {
         out.println(&quot;&amp;lt;h2&amp;gt;Informations d'erreur&amp;lt;/h2&amp;gt;&quot;);
         out.println(&quot;Nom du servlet: &quot; + servletName + &quot;&amp;lt;/br&amp;gt;&amp;lt;/br&amp;gt;&quot;);
         out.println(&quot;ype d'exception: &quot; + throwable.getClass( ).getName( ) + &quot;&amp;lt;/br&amp;gt;&amp;lt;/br&amp;gt;&quot;);
         out.println(&quot;L'URI de la demande: &quot; + requestUri + &quot;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&quot;);
         out.println(&quot;The exception message: &quot; + throwable.getMessage( ));
      }
      out.println(&quot;&amp;lt;/body&amp;gt;&quot;);
      out.println(&quot;&amp;lt;/html&amp;gt;&quot;);
   }

   // Méthode pour gérer la demande de méthode POST.
   public void doPost(HttpServletRequest request, HttpServletResponse response)
      throws ServletException, IOException {

      doGet(request, response);
   }
}
&lt;/code&gt;&lt;/pre&gt;"><span class="hljs-comment">// Importer les bibliothèques Java requises</span>
<span class="hljs-keyword">import</span> java.io.*;
<span class="hljs-keyword">import</span> javax.servlet.*;
<span class="hljs-keyword">import</span> javax.servlet.http.*;
<span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-comment">// Extension de la classe HttpServlet</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ErrorHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{

   <span class="hljs-comment">// Méthode pour gérer la requête de méthode GET.</span>
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span>(HttpServletRequest request, HttpServletResponse response)
      <span class="hljs-keyword">throws</span> ServletException, IOException {

      <span class="hljs-comment">// Analyse l'exception de servlet</span>
      Throwable throwable = (Throwable)
      request.getAttribute(<span class="hljs-string">"javax.servlet.error.exception"</span>);
      Integer statusCode = (Integer)
      request.getAttribute(<span class="hljs-string">"javax.servlet.error.status_code"</span>);
      String servletName = (String)
      request.getAttribute(<span class="hljs-string">"javax.servlet.error.servlet_name"</span>);

      <span class="hljs-keyword">if</span> (servletName == <span class="hljs-keyword">null</span>) {
         servletName = <span class="hljs-string">"Unknown"</span>;
      }
      String requestUri = (String)
      request.getAttribute(<span class="hljs-string">"javax.servlet.error.request_uri"</span>);

      <span class="hljs-keyword">if</span> (requestUri == <span class="hljs-keyword">null</span>) {
         requestUri = <span class="hljs-string">"Unknown"</span>;
      }

      <span class="hljs-comment">// Définir le type de contenu de la réponse</span>
      response.setContentType(<span class="hljs-string">"text/html"</span>);

      PrintWriter out = response.getWriter();
      String title = <span class="hljs-string">"Error/Exception Information"</span>;
      String docType =
         <span class="hljs-string">"&lt;!doctype html public \"-//w3c//dtd html 4.0 "</span> +
         <span class="hljs-string">"transitional//en\"&gt;\n"</span>;

      out.println(docType +
         <span class="hljs-string">"&lt;html&gt;\n"</span> +
         <span class="hljs-string">"&lt;head&gt;&lt;title&gt;"</span> + title + <span class="hljs-string">"&lt;/title&gt;&lt;/head&gt;\n"</span> +
         <span class="hljs-string">"&lt;body bgcolor = \"#f0f0f0\"&gt;\n"</span>);

      <span class="hljs-keyword">if</span> (throwable == <span class="hljs-keyword">null</span> &amp;&amp; statusCode == <span class="hljs-keyword">null</span>) {
         out.println(<span class="hljs-string">"&lt;h2&gt;Les informations d'erreur sont manquantes&lt;/h2&gt;"</span>);
         out.println(<span class="hljs-string">"S'il vous plaît revenir à la &lt;a href=\""</span> +
            response.encodeURL(<span class="hljs-string">"http://localhost:8080/"</span>) +
            <span class="hljs-string">"\"&gt;Page d'accueil&lt;/a&gt;."</span>);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (statusCode != <span class="hljs-keyword">null</span>) {
         out.println(<span class="hljs-string">"Le code d'état: "</span> + statusCode);
      } <span class="hljs-keyword">else</span> {
         out.println(<span class="hljs-string">"&lt;h2&gt;Informations d'erreur&lt;/h2&gt;"</span>);
         out.println(<span class="hljs-string">"Nom du servlet: "</span> + servletName + <span class="hljs-string">"&lt;/br&gt;&lt;/br&gt;"</span>);
         out.println(<span class="hljs-string">"ype d'exception: "</span> + throwable.getClass( ).getName( ) + <span class="hljs-string">"&lt;/br&gt;&lt;/br&gt;"</span>);
         out.println(<span class="hljs-string">"L'URI de la demande: "</span> + requestUri + <span class="hljs-string">"&lt;br&gt;&lt;br&gt;"</span>);
         out.println(<span class="hljs-string">"The exception message: "</span> + throwable.getMessage( ));
      }
      out.println(<span class="hljs-string">"&lt;/body&gt;"</span>);
      out.println(<span class="hljs-string">"&lt;/html&gt;"</span>);
   }

   <span class="hljs-comment">// Méthode pour gérer la demande de méthode POST.</span>
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span>(HttpServletRequest request, HttpServletResponse response)
      <span class="hljs-keyword">throws</span> ServletException, IOException {

      doGet(request, response);
   }
}
</code></pre><p>Compilez <strong>ErrorHandler.java</strong> de la manière habituelle et placez votre fichier de classe dans /webapps/ROOT/WEB-INF/classes.</p><p>Ajoutons la configuration suivante dans web.xml pour gérer les exceptions:</p><pre><code class="xml hljs" data-origin="&lt;pre&gt;&lt;code class=&quot;XML&quot;&gt;&amp;lt;servlet&amp;gt;
   &amp;lt;servlet-name&amp;gt;ErrorHandler&amp;lt;/servlet-name&amp;gt;
   &amp;lt;servlet-class&amp;gt;ErrorHandler&amp;lt;/servlet-class&amp;gt;
&amp;lt;/servlet&amp;gt;

&amp;lt;!-- servlet mappings --&amp;gt;
&amp;lt;servlet-mapping&amp;gt;
   &amp;lt;servlet-name&amp;gt;ErrorHandler&amp;lt;/servlet-name&amp;gt;
   &amp;lt;url-pattern&amp;gt;/ErrorHandler&amp;lt;/url-pattern&amp;gt;
&amp;lt;/servlet-mapping&amp;gt;

&amp;lt;error-page&amp;gt;
   &amp;lt;error-code&amp;gt;404&amp;lt;/error-code&amp;gt;
   &amp;lt;location&amp;gt;/ErrorHandler&amp;lt;/location&amp;gt;
&amp;lt;/error-page&amp;gt;

&amp;lt;error-page&amp;gt;
   &amp;lt;exception-type&amp;gt;java.lang.Throwable&amp;lt;/exception-type &amp;gt;
   &amp;lt;location&amp;gt;/ErrorHandler&amp;lt;/location&amp;gt;
&amp;lt;/error-page&amp;gt;
&lt;/code&gt;&lt;/pre&gt;"><span class="hljs-tag">&lt;<span class="hljs-title">servlet</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">servlet-name</span>&gt;</span>ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">servlet-class</span>&gt;</span>ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">servlet</span>&gt;</span>

<span class="hljs-comment">&lt;!-- servlet mappings --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">servlet-mapping</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">servlet-name</span>&gt;</span>ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-mapping</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">error-page</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">error-code</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-title">error-code</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">location</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">error-page</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">error-page</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">exception-type</span>&gt;</span>java.lang.Throwable<span class="hljs-tag">&lt;/<span class="hljs-title">exception-type</span> &gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-title">location</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">error-page</span>&gt;</span>
</code></pre><p>Essayez maintenant d’utiliser un servlet qui soulève une exception ou de taper une URL incorrecte. Cela obligerait Web Container à appeler le servlet ErrorHandler et à afficher un message approprié, tel que programmé. Par exemple, si vous tapez une URL incorrecte, le résultat suivant sera affiché -</p><blockquote>
<p>Le code d’état: 404</p>
</blockquote><p>Le code ci-dessus peut ne pas fonctionner avec certains navigateurs Web. Essayez donc avec Mozilla et Safari et cela devrait fonctionner.</p><div style="display:flex;justify-content:space-between"><div><a href="chapitre9.html">← precedent</a></div><div><a href="chapitre11.html">suivant →</a></div></div>

<footer style="position:fixed; font-size:.8em; text-align:right; bottom:0px; margin-left:-25px; height:20px; width:100%;">generated by <a href="http://pad.haroopress.com" target="_blank">haroopad</a></footer>
</body>
</html>
